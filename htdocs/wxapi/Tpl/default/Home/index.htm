
<include file = "Common:home_header" />

<include file = "Common:home_nav" />

<style>
.thumb {
  background-image: url(/wxapi/public/images/{{$my_web_logo}}.png);
}
</style>

<section class="content-wrap">
  <div class="container">
    <div class="row">
      <main class="col-md-8 main-content">
        <volist name="my_rec" id="vo">
        <article class="post" style="padding:20px 0px 5px 20px;">
          <h4 class="title"><a href="{{:__APP__}}/Home/subject/id/{{$vo.id}}">{{$key}}</a></h4>
          <ul class="thumb_view">
            <volist name="vo.data" id="item">
            <li>
              <a href="{{:__APP__}}/Home/play/record_id/{{$item.record_id}}/subject_id/{{$item.subject_id}}" class="thumb">
                <span class="p-time">
                  <span class="ibg"></span>
                  <span class="itg">{{$item.disptime}}</span>
                </span><!--img-responsive-->
                <img class="lazy" data-original="{{$my_tracker}}{{$item.image_fdfs}}_154x113" width="154px" height="113px" onerror="doErrHead();"></img>
              </a>
              <div class="thumb_title"><a href="{{:__APP__}}/Home/play/record_id/{{$item.record_id}}/subject_id/{{$item.subject_id}}">{{$item.teacher_name}}&nbsp;&nbsp;{{$item.title_name}}</a></div>
              <div class="thumb_date">{{$item.grade_type}}&nbsp;&nbsp;{{$item.grade_name}}&nbsp;&nbsp;{{$item.camera_name}}</div>
            </li>
            </volist>
          </ul>
        </article>
        </volist>
      </main>
      <aside class="col-md-4 sidebar" style="padding-left:5px;">
        <div class="widget">
          <h4 class="title">最近更新</h4>
          <div>
            <volist name="my_news" id="vo">
            <div class="item">
              <label <elt name="key" value="2">class="hot"</elt> >{{$key+1}}</label>
              <a href="{{:__APP__}}/Home/play/record_id/{{$vo.record_id}}/subject_id/{{$vo.subject_id}}" class="name">{{$vo.subject_name}}&nbsp;&nbsp;{{$vo.grade_type}}&nbsp;&nbsp;{{$vo.grade_name}}&nbsp;&nbsp;{{$vo.camera_name}}</a>
              <span class="extend">{{$vo.created|substr=0,10}}</span>
            </div>
            </volist>
          </div>
        </div>
        <div class="widget">
          <h4 class="title">点击排行</h4>
          <div>
            <volist name="my_clicks" id="item">
            <div class="item">
              <label <elt name="key" value="2">class="hot"</elt> >{{$key+1}}</label>
              <a href="{{:__APP__}}/Home/play/record_id/{{$item.record_id}}/subject_id/{{$item.subject_id}}" class="name">{{$item.subject_name}}&nbsp;&nbsp;{{$item.grade_type}}&nbsp;&nbsp;{{$item.grade_name}}&nbsp;&nbsp;{{$item.camera_name}}</a>
              <span class="extend" title="播放"><i class="fa fa-play-circle-o"></i>&nbsp;{{$item.clicks}}&nbsp;次</span>
            </div>
            </volist>
          </div>
        </div>
      </aside>
    </div>
  </div>
</section>

<script>

// 处理缩略图无法加载的问题...
function doErrHead() {
  var img = event.srcElement; // 获取事件对象...
  img.src  = "/wxapi/public/images/blank.gif"; 
  img.onerror = null; // 控制不要一直跳动
}

$(document).ready( function () {
  // 延时加载图片...
  $(function() {
    $("img.lazy").lazyload({
      effect : "fadeIn"
    });
  });
  // 注册窗口的滚动条函数...
	$(window).scroll(function() {
		if( $(this).scrollTop() > 100 ) {
			$('#back-to-top').fadeIn();
		} else {
			$('#back-to-top').fadeOut();
		}
	});
  // 设置点击back-to-top事件...
	$('#back-to-top').on('click', function(e){
		e.preventDefault();
		$('html, body').animate({scrollTop : 0},1000);
		return false;
	});
});
</script>

<include file = "Common:home_footer" />
