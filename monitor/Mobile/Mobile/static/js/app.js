webpackJsonp([1],{0:function(t,e){},"3rgV":function(t,e){},"3zYO":function(t,e){},Acud:function(t,e){},"E+nB":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={mounted:function(){var t=this;setTimeout(function(){t.hasReady=!0},0),this.updateIndex(),this.$on("onTabItemClick",function(t){this.props_index=t,this.$emit("on-index-change",this.props_index)})},props:{index:{type:Number,default:0},value:Number,lineWidth:{type:Number,default:3},activeColor:{type:String,default:"#04be02"},defaultColor:{type:String,default:"#666"},disabledColor:{type:String,default:"#ddd"},animate:{type:Boolean,default:!0}},computed:{barLeft:function(){return this.props_index*(100/this.number)+"%"},barRight:function(){return(this.number-this.props_index-1)*(100/this.number)+"%"},barStyle:function(){return{left:this.barLeft,right:this.barRight,display:"block",backgroundColor:this.activeColor,height:this.lineWidth+"px",transition:this.hasReady?null:"none"}},barClass:function(){return{"vux-tab-ink-bar-transition-forward":"forward"===this.direction,"vux-tab-ink-bar-transition-backward":"backward"===this.direction}}},watch:{value:function(t){this.props_index=t},index:function(t,e){this.props_index=t},props_index:function(t,e){this.direction=t>e?"forward":"backward",e>-1&&this.$children[e]&&(this.$children[e].props_selected=!1),t>-1&&(this.$children[t].props_selected=!0),this.$emit("input",t)}},methods:{updateIndex:function(){if(this.$children){this.number=this.$children.length;for(var t=this.$children,e=0;e<t.length;e++)t[e].index=e,t[e].index===this.index&&(this.props_index=e)}}},data:function(){return{direction:"forward",right:"100%",number:this.$children.length,hasReady:!1,props_index:0}}}},I6X2:function(t,e){},MD8P:function(t,e){},MUiI:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{type:{default:"default"},disabled:Boolean,mini:Boolean,plain:Boolean,text:String},computed:{classes:function(){return[{weui_btn_disabled:this.disabled,weui_btn_mini:this.mini},"weui_btn_"+this.type,this.plain?"weui_btn_plain_"+this.type:""]}},methods:{onclick:function(){this.$emit("click")}}}},NHnr:function(t,e,i){"use strict";function a(t){i("xT42")}function s(t){i("zPej")}function n(t){i("W+SH")}function o(t){i("3zYO")}function r(t){i("wBjb")}function l(t){i("3rgV")}function c(t){i("Acud")}function u(t){i("nmDi")}function d(t){i("PWGy")}function p(t){i("I6X2")}function h(t){i("UmRk")}function f(t){i("kZE+")}function v(t){i("hO0g")}Object.defineProperty(e,"__esModule",{value:!0});var m=i("TWX9"),g=i("HVJf"),_=i("zO6J"),y={deactivated:function(){this.$destroy()},mounted:function(){this.$router.push("Home")}},C=function(){var t=this,e=t.$createElement;return(t._self._c||e)("div")},w=[],b={render:C,staticRenderFns:w},x=b,k=i("/Xao"),$=k(y,x,!1,null,null,null),P=$.exports,S=i("E+nB"),L=i.n(S),G=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vux-tab",class:{"vux-tab-no-animate":!t.animate}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.props_index,expression:"props_index"}],staticStyle:{display:"none"},domProps:{value:t.props_index},on:{input:function(e){e.target.composing||(t.props_index=e.target.value)}}}),t._v(" "),t._t("default"),t._v(" "),t.animate?i("div",{staticClass:"vux-tab-ink-bar",class:t.barClass,style:t.barStyle}):t._e()],2)},E=[],D={render:G,staticRenderFns:E},T=D,O=i("/Xao"),A=a,M=O(L.a,T,!1,A,null,null),B=M.exports,R=i("lfr8"),j=i.n(R),H=function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"vux-tab-item",class:[t.props_selected?t.activeClass:"",{"vux-tab-selected":t.props_selected}],style:t.style,on:{click:t.onItemClick}},[t._t("default")],2)},N=[],I={render:H,staticRenderFns:N},X=I,V=i("/Xao"),z=V(j.a,X,!1,null,null,null),F=z.exports,W=i("ZVek"),Y=i.n(W),U=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vux-slider"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.props_index,expression:"props_index"}],staticStyle:{display:"none"},domProps:{value:t.props_index},on:{input:function(e){e.target.composing||(t.props_index=e.target.value)}}}),t._v(" "),i("div",{staticClass:"vux-swiper",style:{height:t.xheight}},[t._t("default"),t._v(" "),t._l(t.list,function(e,a){return i("div",{staticClass:"vux-swiper-item",attrs:{"data-index":a},on:{click:function(i){t.clickListItem(e)}}},[i("a",{attrs:{href:"javascript:"}},[i("div",{staticClass:"vux-img",style:{backgroundImage:t.buildBackgroundUrl(e.img)}}),t._v(" "),t.showDescMask?i("p",{staticClass:"vux-swiper-desc"},[t._v(t._s(e.title))]):t._e()])])})],2),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.showDots,expression:"showDots"}],class:[t.dotsClass,"vux-indicator","vux-indicator-"+t.dotsPosition]},t._l(t.length,function(e){return i("a",{attrs:{href:"javascript:"}},[i("i",{staticClass:"vux-icon-dot",class:{active:e-1===t.props_index}})])}))])},q=[],J={render:U,staticRenderFns:q},K=J,Z=i("/Xao"),Q=s,tt=Z(Y.a,K,!1,Q,null,null),et=tt.exports,it=i("r6aI"),at=i.n(it),st=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"weui_loading_toast"},[i("div",{staticClass:"weui_mask_transparent"}),t._v(" "),i("div",{staticClass:"weui_toast",style:{position:t.position}},[i("i",{staticClass:"weui-loading weui-icon_toast"}),t._v(" "),i("p",{staticClass:"weui_toast_content"},[t._v(t._s(t.text)),t._t("default")],2)])])},nt=[],ot={render:st,staticRenderFns:nt},rt=ot,lt=i("/Xao"),ct=n,ut=lt(at.a,rt,!1,ct,null,null),dt=ut.exports,pt=i("pL7N"),ht=i.n(pt),ft=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{style:t.styles},[i("div",{staticClass:"xs-container"},[t._t("default"),t._v(" "),t._t("pulldown"),t._v(" "),t._t("pullup")],2)])},vt=[],mt={render:ft,staticRenderFns:vt},gt=mt,_t=i("/Xao"),yt=o,Ct=_t(ht.a,gt,!1,yt,null,null),wt=Ct.exports,bt=i("3cXf"),xt=i.n(bt),kt={props:{list:{type:Array,default:function(){return[]}},isLive:{type:Boolean,default:!1}},data:function(){return{lastSelElem:null}},methods:{clickListItem:function(t){this.lastSelElem&&this.lastSelElem.setAttribute("class","am-gallery-item"),this.lastSelElem=event.currentTarget.firstElementChild,this.lastSelElem.setAttribute("class","am-gallery-focus"),this.$emit("on-click-list-item",JSON.parse(xt()(t)))}},mounted:function(){}},$t=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ul",{staticClass:"am-gallery am-avg-sm-2 am-gallery-bordered"},t._l(t.list,function(e,a){return i("li",{on:{click:function(i){t.clickListItem(e)}}},[i("div",{staticClass:"am-gallery-item"},[i("a",{attrs:{href:"javascript:"}},[i("div",{staticClass:"am-gallery-box"},[i("div",{staticClass:"am-gallery-play",style:{display:t.isLive?"none":"block"}},[i("i",{staticClass:"fa fa-play-circle"})]),t._v(" "),t.isLive?[i("div",{staticClass:"am-gallery-up"},[e.status>=1?[i("div",{staticClass:"am-thumb-back online"}),t._v(" "),i("div",{staticClass:"am-thumb-text"},[t._v("直播中")])]:[i("div",{staticClass:"am-thumb-back offline"}),t._v(" "),i("div",{staticClass:"am-thumb-text"},[t._v("离线中")])]],2)]:[i("div",{staticClass:"am-gallery-down"},[i("div",{staticClass:"am-thumb-back dtime"}),t._v(" "),i("div",{staticClass:"am-thumb-text"},[t._v(t._s(e.disptime))])])],t._v(" "),i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.image_fdfs+"_240x140",expression:"item.image_fdfs + '_240x140'"}],staticClass:"am-gallery-img"})],2),t._v(" "),i("h3",{staticClass:"am-gallery-title"},[t.isLive?[0==e.stream_prop?[i("i",{staticClass:"fa fa-camera"},[t._v(" 摄像头 - "+t._s(e.camera_name))])]:1==e.stream_prop?[i("i",{staticClass:"fa fa-file-video-o"},[t._v(" MP4文件 - "+t._s(e.camera_name))])]:2==e.stream_prop?[i("i",{staticClass:"fa fa-arrow-circle-o-down"},[t._v(" 流转发 - "+t._s(e.camera_name))])]:t._e()]:[i("i",{staticClass:"fa fa-clock-o"},[t._v(" "+t._s(e.created))])]],2),t._v(" "),!1===t.isLive?[i("div",{staticClass:"am-gallery-desc"},[i("span",{staticClass:"am-left"},[i("i",{staticClass:"fa fa-file-video-o"},[t._v(" "+t._s(e.file_size)+" MB")])]),t._v(" "),i("span",{staticClass:"am-right"},[i("i",{staticClass:"fa fa-play-circle-o"},[t._v(" "+t._s(e.clicks)+" 次")])])])]:t._e()],2)])])}))},Pt=[],St={render:$t,staticRenderFns:Pt},Lt=St,Gt=i("/Xao"),Et=r,Dt=Gt(kt,Lt,!1,Et,null,null),Tt=Dt.exports,Ot={components:{Tab:B,TabItem:F,Swiper:et,Loading:dt,Scroller:wt,Galleray:Tt},data:function(){return{isDispGallery:!0,isDispSwiper:!0,isDispEnd:!1,isLoading:!0,isLive:!1,curSubject:0,curGalPage:1,maxGalPage:1,tabWidth:300,arrGather:[],arrSwiper:[],arrGallery:[],pulldownConfig:{height:30,content:"下拉刷新",downContent:"下拉刷新",upContent:"释放刷新",loadingContent:"加载中..."},pullupConfig:{pullUpHeight:74,height:74,content:"上拉加载更多",downContent:"松开进行加载",upContent:"上拉加载更多",loadingContent:"加载中..."}}},methods:{onSubjectChange:function(t){console.log("Subject(%s, %s)",this.arrGather[t].gather_id,this.arrGather[t].name_set),this.curSubject!==t&&(this.curSubject=t,this.loadGather(this.arrGather[t].gather_id))},onClickSwiper:function(t){this.curSubject>0?(this.doLivePage(t),console.log("Swiper(Live, %s)",t.camera_id)):(this.$router.push({name:"Vod",params:t}),console.log("Swiper(Vod, %s)",t.record_id))},onClickGallery:function(t){this.curSubject>0?(this.doLivePage(t),console.log("Gallery(Live, %s)",t.camera_id)):(this.$router.push({name:"Vod",params:t}),console.log("Gallery(Vod, %s)",t.record_id))},doLivePage:function(t){var e=this,i="/wxapi.php/Mobile/getHlsAddr/camera_id/"+t.camera_id,a=this;a.isLoading=!0,a.$root.$http.get(i).then(function(i){a.isLoading=!1,console.log("=== get hls address ==="),console.log(i.data.hls_url),t.arrHlsAddr=i.data,e.$router.push({name:"Live",params:t})}).catch(function(t){a.isLoading=!1,console.log(t)})},refresh:function(t){var e=this,i=e.arrGather[e.curSubject].gather_id,a="/wxapi.php/Mobile/getSwiper/gather_id/"+i;e.$root.$http.get(a).then(function(i){e.arrSwiper=i.data,e.isDispSwiper=!0,e.arrSwiper instanceof Array||(e.isDispSwiper=!1,e.arrSwiper=[]),e.$nextTick(function(){t.$emit("pulldown:reset",t.uuid)})}).catch(function(t){console.log(t)})},loadMore:function(t){var e=this;if(e.curGalPage>e.maxGalPage)return void e.$nextTick(function(){t.$emit("pullup:disable",t.uuid),t.$emit("pullup:reset",t.uuid),e.isDispEnd=!0});var i=e.arrGather[e.curSubject].gather_id,a="/wxapi.php/Mobile/getGallery/p/"+e.curGalPage+"/gather_id/"+i;e.$root.$http.get(a).then(function(i){e.arrGallery=e.arrGallery.concat(i.data),++e.curGalPage,e.$nextTick(function(){t.$emit("pullup:reset",t.uuid)})}).catch(function(t){console.log(t)})},loadGather:function(t){var e=this;e.curGalPage=1,e.maxGalPage=1,e.arrSwiper=[],e.arrGallery=[],e.isLoading=!0,e.isDispEnd=!1,e.isDispSwiper=!0,e.isDispGallery=!0,e.$refs.endScroll.style.lineHeight="",e.isLive=-1!==t,e.$refs.galScroller._xscroll.scrollTop(0,1e3,"ease-in-out");var i="/wxapi.php/Mobile/getGather/gather_id/"+t;e.$root.$http.get(i).then(function(t){if(e.maxGalPage=t.data.maxGalPage,e.arrGather=t.data.arrGather,e.tabWidth=70*e.arrGather.length,e.arrSwiper=t.data.arrSwiper,e.arrGallery=t.data.arrGallery,e.arrSwiper instanceof Array||(e.isDispSwiper=!1,e.arrSwiper=[]),!(e.arrGallery instanceof Array))return e.isDispGallery=!1,e.isDispEnd=!0,e.isLoading=!1,e.arrGallery=[],e.$nextTick(function(){e.$refs.tabScroller.reset();var t=e.$refs.galScroller;t.$emit("pullup:reset",t.uuid),t.$emit("pullup:disable",t.uuid)}),void(e.isDispSwiper||(e.$refs.endScroll.style.lineHeight="80px"));e.curGalPage<=e.maxGalPage&&++e.curGalPage,e.isLoading=!1,e.$nextTick(function(){e.$refs.tabScroller.reset();var t=e.$refs.galScroller,i=e.curGalPage>e.maxGalPage?"pullup:disable":"pullup:enable";e.isDispEnd=e.curGalPage>e.maxGalPage?1:0,t.$emit("pullup:reset",t.uuid),t.$emit(i,t.uuid)})}).catch(function(t){e.isLoading=!1,console.log(t)})}},mounted:function(){this.$refs.endScroll.style.height="80px",this.loadGather(-1),this.$store.state.vux.fastClick.attach(this.$refs.divHome)},created:function(){console.log("home - created")},activated:function(){console.log("home - activated"),this.$store.commit("updateLoadingStatus",{isLoading:!1})},deactivated:function(){console.log("home - deactivated")}},At=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"divHome"},[i("loading",{attrs:{show:t.isLoading,position:"absolute",text:"加载中"}}),t._v(" "),i("scroller",{ref:"tabScroller",staticClass:"tabGround",attrs:{"lock-y":"","scrollbar-x":!1}},[i("tab",{style:"width:"+t.tabWidth+"px",attrs:{"line-width":2,"active-color":"#fc378c",animate:!0},on:{"on-index-change":t.onSubjectChange}},t._l(t.arrGather,function(e,a){return i("tab-item",{key:a,attrs:{selected:0===a}},[t._v(t._s(e.name_set))])}))],1),t._v(" "),i("scroller",{ref:"galScroller",attrs:{"lock-x":"","scrollbar-y":!0,"enable-horizontal-swiping":"","use-pulldown":"","pulldown-config":t.pulldownConfig,"use-pullup":"","pullup-config":t.pullupConfig},on:{"pulldown:loading":t.refresh,"pullup:loading":t.loadMore}},[i("div",[i("swiper",{directives:[{name:"show",rawName:"v-show",value:t.isDispSwiper,expression:"isDispSwiper"}],attrs:{list:t.arrSwiper,auto:"",loop:"",threshold:10,height:"200px"},on:{"on-click-list-item":t.onClickSwiper}}),t._v(" "),i("galleray",{directives:[{name:"show",rawName:"v-show",value:t.isDispGallery,expression:"isDispGallery"}],attrs:{isLive:t.isLive,list:t.arrGallery},on:{"on-click-list-item":t.onClickGallery}}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isDispEnd,expression:"isDispEnd"}],ref:"endScroll",staticClass:"endScroll"},[t._v("没有更多内容了")])],1)])],1)},Mt=[],Bt={render:At,staticRenderFns:Mt},Rt=Bt,jt=i("/Xao"),Ht=l,Nt=jt(Ot,Rt,!1,Ht,null,null),It=Nt.exports,Xt={props:{list:{type:Array,default:function(){return[]}},focusRecord:{type:String,default:""}},methods:{clickListItem:function(t){t.record_id!==this.focusRecord&&this.$emit("on-click-list-item",t)}},mounted:function(){}},Vt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",t._l(t.list,function(e,a){return i("div",{staticClass:"list_media_box",on:{click:function(i){t.clickListItem(e)}}},[i("div",{staticClass:"list_media_hd"},[i("div",{staticClass:"c-time"},[i("div",{staticClass:"thumb_back"}),t._v(" "),i("div",{staticClass:"thumb_time"},[t._v(t._s(e.disptime))])]),t._v(" "),i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.image_fdfs+"_240x140",expression:"item.image_fdfs + '_240x140'"}],staticClass:"list_media_thumb"})]),t._v(" "),i("div",{staticClass:"list_media_bd"},[i("h4",{staticClass:"list_media_title",staticStyle:{"line-height":"25px"},style:{color:e.record_id===t.focusRecord?"#FF5722":"#000"}},[i("i",{staticClass:"fa fa-file-video-o"},[t._v(" "+t._s(e.camera_name))])]),t._v(" "),i("div",{staticClass:"list_media_desc",staticStyle:{"font-size":"14px"}},[i("span",[i("i",{staticClass:"fa fa-clock-o"},[t._v(" "+t._s(e.created))])]),t._v(" "),i("span",{staticStyle:{float:"right"}},[i("i",{staticClass:"fa fa-play-circle-o"},[t._v(" "+t._s(e.clicks)+"次")])])])])])}))},zt=[],Ft={render:Vt,staticRenderFns:zt},Wt=Ft,Yt=i("/Xao"),Ut=c,qt=Yt(Xt,Wt,!1,Ut,null,null),Jt=qt.exports,Kt={props:{isError:{type:Boolean,default:!1}},methods:{onClickBack:function(){this.$emit("on-click-top-back")},onClickMute:function(){this.$emit("on-click-top-mute")}},mounted:function(){}},Zt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"left-back",on:{click:t.onClickBack}}),t._v(" "),i("div",{staticClass:"left-arrow",on:{click:t.onClickBack}}),t._v(" "),i("div",{staticClass:"right-mute",style:{display:t.isError?"none":"block"}}),t._v(" "),i("div",{staticClass:"right-vol",style:{display:t.isError?"none":"block"},on:{click:t.onClickMute}},[i("i",{staticClass:"vjs-icon-volume-high"})])])},Qt=[],te={render:Zt,staticRenderFns:Qt},ee=te,ie=i("/Xao"),ae=u,se=ie(Kt,ee,!1,ae,null,null),ne=se.exports,oe={components:{Scroller:wt,ListView:Jt,TopNav:ne},props:{videoHeight:{type:String,default:"210px"}},data:function(){return{arrGallery:[],curGalPage:1,isDispEnd:!1,videoParams:this.$route.params,playerOptions:{autoplay:!0,muted:!0,loop:!1,language:"zh-CN",height:this.videoHeight,playbackRates:[1,1.5,2],sources:[{type:"video/mp4",src:this.$route.params.file_fdfs}],poster:null!==this.$route.params.image_fdfs?this.$route.params.image_fdfs:"/wxapi/public/images/snap.png"},pullupConfig:{pullUpHeight:245,height:245,content:"上拉加载更多",downContent:"松开进行加载",upContent:"上拉加载更多",loadingContent:"加载中..."}}},created:function(){},activated:function(){},deactivated:function(){this.$destroy()},mounted:function(){if(window.addEventListener("orientationchange",this.onChangeOrientation,!1),void 0===this.$route.params.file_fdfs)return history.back(),void this.$destroy();this.$store.commit("updateLoadingStatus",{isLoading:!1}),this.$refs.endScroll.style.height="250px",this.$refs.endScroll.style.marginTop="5px",this.loadGallery(this.videoParams.camera_id,this.$refs.galScroller),this.$store.state.vux.fastClick.attach(this.$refs.galScroller.$el),this.doSaveClick(this.videoParams)},computed:{player:function(){return this.$refs.videoPlayer.player}},methods:{onClickListView:function(t){this.videoParams=t,this.playerOptions.sources[0].src=this.videoParams.file_fdfs,this.playerOptions.poster=null!==this.videoParams.image_fdfs?this.videoParams.image_fdfs:"/wxapi/public/images/snap.png",this.doSaveClick(this.videoParams)},doSaveClick:function(t){var e=this,i="/wxapi.php/Mobile/saveClick/type/vod/record_id/"+t.record_id;e.$root.$http.get(i).then(function(e){console.log("vod: record_id => %s, s_click => %d, c_click => %s)",t.record_id,e.data,t.clicks),t.clicks=e.data}).catch(function(t){console.log(t)})},loadMore:function(t){this.loadGallery(this.videoParams.camera_id,t)},loadGallery:function(t,e){var i=this,a="/wxapi.php/Mobile/getRecord/p/"+i.curGalPage+"/camera_id/"+t;i.$root.$http.get(a).then(function(t){if(t.data instanceof Array&&t.data.length>0&&(i.arrGallery=i.arrGallery.concat(t.data)),1===i.curGalPage&&t.data.length<10||!(t.data instanceof Array))return void i.$nextTick(function(){e.$emit("pullup:reset",e.uuid),e.$emit("pullup:disable",e.uuid),i.isDispEnd=!0});++i.curGalPage,i.$nextTick(function(){e.$emit("pullup:reset",e.uuid),e.$emit("pullup:enable",e.uuid)})}).catch(function(t){console.log(t)})},isAndroid:function(){var t=navigator.userAgent;return t.indexOf("Android")>-1||t.indexOf("Linux")>-1},isWeXin:function(){return navigator.userAgent.toLowerCase().indexOf("micromessenger")>-1},onChangeOrientation:function(t){0!==window.orientation&&this.$refs.videoPlayer.player.requestFullscreen()},onClickTopBack:function(){history.back()},onClickTopMute:function(){var t=event.currentTarget.firstElementChild,e=this.$refs.videoPlayer.player,i=e.muted();e.muted(!i),t.setAttribute("class",i?"vjs-icon-volume-high":"vjs-icon-volume-mute")},onPlayerPlay:function(t){console.log("player play!")},onPlayerPause:function(t){console.log("player pause!")},onPlayerEnded:function(t){if(console.log("player ended!"),!(this.arrGallery.length<=0))for(var e=this.$refs.listVod.focusRecord,i=0;i<this.arrGallery.length;++i)if(e===this.arrGallery[i].record_id){var a=i+1;a>=this.arrGallery.length&&(this.$refs.galScroller._xscroll.scrollTop(0,1e3,"ease-in-out"),a=0);var s=this.arrGallery[a];return void this.onClickListView(s)}},onPlayerLoadeddata:function(t){console.log("player Loadeddata!")},onPlayerWaiting:function(t){console.log("player Waiting!")},onPlayerPlaying:function(t){console.log("player Playing!")},onPlayerTimeupdate:function(t){},onPlayerCanplaythrough:function(t){console.log("player Canplaythrough!")},onPlayerCanplay:function(t){console.log("player Canplay!")},onPlayerError:function(t){console.log("player Error!")},playerReadyOK:function(t){console.log("player readyok!"),this.isAndroid()&&this.isWeXin()?(this.playerOptions.autoplay=!1,this.playerOptions.muted=!1):this.$refs.videoPlayer.player.muted(!1)},playerStateChanged:function(t){}}},re=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("top-nav",{on:{"on-click-top-back":t.onClickTopBack,"on-click-top-mute":t.onClickTopMute}}),t._v(" "),i("scroller",{ref:"videoScroll",attrs:{"lock-x":"","lock-y":"","scrollbar-x":!1,height:"videoHeight"}},[i("video-player",{ref:"videoPlayer",staticClass:"vjs-custom-skin",attrs:{options:t.playerOptions,playsinline:!0},on:{play:function(e){t.onPlayerPlay(e)},pause:function(e){t.onPlayerPause(e)},ended:function(e){t.onPlayerEnded(e)},loadeddata:function(e){t.onPlayerLoadeddata(e)},waiting:function(e){t.onPlayerWaiting(e)},playing:function(e){t.onPlayerPlaying(e)},timeupdate:function(e){t.onPlayerTimeupdate(e)},canplay:function(e){t.onPlayerCanplay(e)},canplaythrough:function(e){t.onPlayerCanplaythrough(e)},error:function(e){t.onPlayerError(e)},ready:function(e){t.playerReadyOK(e)},statechanged:function(e){t.playerStateChanged(e)}}})],1),t._v(" "),i("scroller",{ref:"galScroller",attrs:{"lock-x":"","scrollbar-y":!0,"use-pullup":"","pullup-config":t.pullupConfig},on:{"pullup:loading":t.loadMore}},[i("div",[i("div",{staticClass:"thumb_name"},[i("i",{staticClass:"fa fa-file-video-o"},[t._v(" "+t._s(t.videoParams.camera_name))])]),t._v(" "),i("div",{staticClass:"thumb_date"},[i("span",[i("i",{staticClass:"fa fa-clock-o"},[t._v(" "+t._s(t.videoParams.created))])]),t._v(" "),i("span",{staticStyle:{float:"right"}},[i("i",{staticClass:"fa fa-play-circle-o"},[t._v(" "+t._s(t.videoParams.clicks)+"次")])])]),t._v(" "),i("div",{staticClass:"thumb_split"}),t._v(" "),i("ListView",{ref:"listVod",attrs:{focusRecord:t.videoParams.record_id,list:t.arrGallery},on:{"on-click-list-item":t.onClickListView}}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isDispEnd,expression:"isDispEnd"}],ref:"endScroll",staticClass:"endScroll"},[t._v("没有更多内容了")])],1)])],1)},le=[],ce={render:re,staticRenderFns:le},ue=ce,de=i("/Xao"),pe=d,he=de(oe,ue,!1,pe,null,null),fe=he.exports,ve=i("MUiI"),me=i.n(ve),ge=function(){var t=this,e=t.$createElement;return(t._self._c||e)("button",{staticClass:"weui_btn",class:t.classes,attrs:{disabled:t.disabled},on:{click:t.onclick}},[t._v("\n  "+t._s(t.text)),t._t("default")],2)},_e=[],ye={render:ge,staticRenderFns:_e},Ce=ye,we=i("/Xao"),be=p,xe=we(me.a,Ce,!1,be,null,null),ke=xe.exports,$e={props:{isError:{type:Boolean,default:!1},msg_title:{type:String,default:""},msg_desc:{type:String,default:""}},mounted:function(){}},Pe=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"weui_msg msg_top",style:{display:t.isError?"block":"none"}},[t._m(0,!1,!1),t._v(" "),i("div",{staticClass:"weui_text_area"},[i("h2",{staticClass:"weui_msg_title",staticStyle:{"font-size":"16px"}},[t._v(t._s(t.msg_title))]),t._v(" "),i("p",{staticClass:"weui_msg_desc"},[t._v(t._s(t.msg_desc))])])])])},Se=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"weui_icon_area",staticStyle:{"margin-bottom":"15px"}},[i("i",{staticClass:"weui_icon_safe weui_icon_safe_warn"})])}],Le={render:Pe,staticRenderFns:Se},Ge=Le,Ee=i("/Xao"),De=h,Te=Ee($e,Ge,!1,De,null,null),Oe=Te.exports,Ae=i("DEjr"),Me={components:{XButton:ke,Scroller:wt,ListView:Jt,TopNav:ne,Error:Oe},props:{videoHeight:{type:String,default:"210px"}},data:function(){return{player_clock:-1,arrGallery:[],arrHlsAddr:[],curGalPage:1,isLive:!0,isDispEnd:!1,liveParams:this.$route.params,videoParams:this.$route.params,playerOptions:{autoplay:!0,muted:!0,language:"zh-CN",height:this.videoHeight,sources:[{withCredentials:!1,type:this.$route.params.arrHlsAddr.hls_type,src:this.$route.params.arrHlsAddr.hls_url}],controlBar:{timeDivider:!1,durationDisplay:!1,remainingTimeDisplay:!1},html5:{hls:{withCredentials:!1}},poster:null!==this.$route.params.image_fdfs?this.$route.params.image_fdfs:"/wxapi/public/images/snap.png"},pullupConfig:{pullUpHeight:245,height:245,content:"上拉加载更多",downContent:"松开进行加载",upContent:"上拉加载更多",loadingContent:"加载中..."}}},computed:{doCheckError:function(){return!!this.isLive&&this.liveParams.arrHlsAddr.err_code},doMsgTitle:function(){return this.isLive?this.liveParams.arrHlsAddr.err_msg:""},doMsgDesc:function(){return this.isLive?this.liveParams.arrHlsAddr.err_desc:""}},deactivated:function(){this.doLivePlayVerify(0),this.resetClock(),this.$destroy()},mounted:function(){if(window.addEventListener("orientationchange",this.onChangeOrientation,!1),void 0===this.$route.params.camera_id)return history.back(),void this.$destroy();this.isLive=!0,this.$store.commit("updateLoadingStatus",{isLoading:!1}),this.$refs.endScroll.style.height="250px",this.$refs.endScroll.style.marginTop="5px",this.loadGallery(this.videoParams.camera_id,this.$refs.galScroller),this.$store.state.vux.fastClick.attach(this.$refs.galScroller.$el),this.buildClock()},methods:{resetClock:function(){clearInterval(this.player_clock),this.player_clock=-1},buildClock:function(){if(!this.liveParams.arrHlsAddr.err_code){var t=this;t.player_clock=setInterval(function(){t.doLivePlayVerify(1)},12e3),t.doSaveClick(t.videoParams),console.log("=== buildClock ok ===")}},doGetLiveAddr:function(t){var e=this,i=this,a="/wxapi.php/Mobile/getHlsAddr/camera_id/"+t;console.log("=== get hls address start ==="),i.$store.commit("updateLoadingStatus",{isLoading:!0}),i.$root.$http.get(a).then(function(t){i.liveParams.arrHlsAddr=t.data,console.log(t.data.hls_url),i.playerOptions.sources[0].type=i.liveParams.arrHlsAddr.hls_type,i.playerOptions.sources[0].src=i.liveParams.arrHlsAddr.hls_url,i.playerOptions.poster=null!==i.liveParams.image_fdfs?i.liveParams.image_fdfs:"/wxapi/public/images/snap.png",i.playerOptions.controlBar.timeDivider=!1,i.playerOptions.controlBar.durationDisplay=!1,e.buildClock(),i.$store.commit("updateLoadingStatus",{isLoading:!1}),console.log("=== get hls address end ===")}).catch(function(t){i.$store.commit("updateLoadingStatus",{isLoading:!1}),console.log(t)})},onClickLive:function(){this.isLive||(this.isLive=!0,this.videoParams=this.liveParams,this.resetClock(),this.doGetLiveAddr(this.liveParams.camera_id))},onClickVod:function(t){this.resetClock(),this.isLive=!1,this.videoParams=t,this.playerOptions.sources[0].type="video/mp4",this.playerOptions.sources[0].src=this.videoParams.file_fdfs,this.playerOptions.poster=null!==this.videoParams.image_fdfs?this.videoParams.image_fdfs:"/wxapi/public/images/snap.png",this.playerOptions.controlBar.timeDivider=!0,this.playerOptions.controlBar.durationDisplay=!0,this.doSaveClick(this.videoParams)},doSaveClick:function(t){var e=this,i=this,a="/wxapi.php/Mobile/saveClick/type";a+=this.isLive?"/live/camera_id/"+t.camera_id:"/vod/record_id/"+t.record_id,i.$root.$http.get(a).then(function(i){e.isLive?console.log("live: camera_id => %s, s_click => %d, c_click => %s)",t.camera_id,i.data,t.clicks):console.log("vod: record_id => %s, s_click => %d, c_click => %s)",t.record_id,i.data,t.clicks),t.clicks=i.data}).catch(function(t){console.log(t)})},doLivePlayVerify:function(t){if(!this.liveParams.arrHlsAddr.err_code){var e=this,i=this.liveParams.arrHlsAddr.player_camera,a=this.liveParams.arrHlsAddr.player_id,s={rtmp_live:i,player_id:a,player_type:1,player_active:t};e.$root.$http.post("/wxapi.php/RTMP/verify",Ae.stringify(s),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(s){if(s.data.err_code>0)return console.log("verify error => "+s.data.err_msg),void clearInterval(e.player_clock);console.log("verify success => player_camera: %s, player_id: %d, player_type: %d, player_active: %d",i,a,1,t)}).catch(function(t){console.log(t),clearInterval(e.player_clock)})}},loadMore:function(t){this.loadGallery(this.videoParams.camera_id,t)},loadGallery:function(t,e){var i=this,a="/wxapi.php/Mobile/getRecord/p/"+i.curGalPage+"/camera_id/"+t;i.$root.$http.get(a).then(function(t){if(t.data instanceof Array&&t.data.length>0&&(i.arrGallery=i.arrGallery.concat(t.data)),!(t.data instanceof Array)||1===i.curGalPage&&t.data.length<10)return void i.$nextTick(function(){e.$emit("pullup:reset",e.uuid),e.$emit("pullup:disable",e.uuid),i.isDispEnd=!0});++i.curGalPage,i.$nextTick(function(){e.$emit("pullup:reset",e.uuid),e.$emit("pullup:enable",e.uuid)})}).catch(function(t){console.log(t)})},isAndroid:function(){var t=navigator.userAgent;return t.indexOf("Android")>-1||t.indexOf("Linux")>-1},isWeXin:function(){return navigator.userAgent.toLowerCase().indexOf("micromessenger")>-1},onChangeOrientation:function(t){0!==window.orientation&&this.$refs.videoPlayer.player.requestFullscreen()},onClickTopBack:function(){history.back()},onClickTopMute:function(){var t=event.currentTarget.firstElementChild,e=this.$refs.videoPlayer.player,i=e.muted();e.muted(!i),t.setAttribute("class",i?"vjs-icon-volume-high":"vjs-icon-volume-mute")},onPlayerCanplaythrough:function(t){console.log("player Canplaythrough!")},onPlayerCanplay:function(t){console.log("player Canplay!")},onPlayerError:function(t){console.log("player Error!")},onPlayerPlay:function(t){console.log("player play!")},onPlayerPause:function(t){console.log("player pause!")},onPlayerEnded:function(t){if(console.log("player ended!"),!(this.arrGallery.length<=0))for(var e=this.$refs.listVod.focusRecord,i=0;i<this.arrGallery.length;++i)if(e===this.arrGallery[i].record_id){var a=i+1;a>=this.arrGallery.length&&(this.$refs.galScroller._xscroll.scrollTop(0,1e3,"ease-in-out"),a=0);var s=this.arrGallery[a];return void this.onClickVod(s)}},playerReadyOK:function(t){console.log("player readyok!"),this.isAndroid()&&this.isWeXin()?(this.playerOptions.autoplay=!1,this.playerOptions.muted=!1):this.$refs.videoPlayer.player.muted(!1)}}},Be=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("top-nav",{attrs:{isError:t.doCheckError},on:{"on-click-top-back":t.onClickTopBack,"on-click-top-mute":t.onClickTopMute}}),t._v(" "),i("scroller",{ref:"videoScroll",attrs:{"lock-x":"","lock-y":"","scrollbar-x":!1,height:t.videoHeight}},[i("error",{attrs:{msg_title:t.doMsgTitle,msg_desc:t.doMsgDesc,isError:t.doCheckError}}),t._v(" "),i("video-player",{ref:"videoPlayer",staticClass:"vjs-custom-skin",style:{display:t.doCheckError?"none":"block"},attrs:{options:t.playerOptions,playsinline:!0},on:{play:function(e){t.onPlayerPlay(e)},pause:function(e){t.onPlayerPause(e)},canplaythrough:function(e){t.onPlayerCanplaythrough(e)},canplay:function(e){t.onPlayerCanplay(e)},error:function(e){t.onPlayerError(e)},ended:function(e){t.onPlayerEnded(e)},ready:function(e){t.playerReadyOK(e)}}})],1),t._v(" "),i("scroller",{ref:"galScroller",attrs:{"lock-x":"","scrollbar-y":!0,"use-pullup":"","pullup-config":t.pullupConfig},on:{"pullup:loading":t.loadMore}},[i("div",[i("div",{staticClass:"thumb_name"},[t.isLive?[0==t.videoParams.stream_prop?[i("i",{staticClass:"fa fa-camera"},[t._v(" 摄像头 - "+t._s(t.videoParams.camera_name))])]:1==t.videoParams.stream_prop?[i("i",{staticClass:"fa fa-file-video-o"},[t._v(" MP4文件 - "+t._s(t.videoParams.camera_name))])]:2==t.videoParams.stream_prop?[i("i",{staticClass:"fa fa-arrow-circle-o-down"},[t._v(" 流转发 - "+t._s(t.videoParams.camera_name))])]:t._e()]:[i("i",{staticClass:"fa fa-file-video-o"},[t._v(" "+t._s(t.videoParams.camera_name))])]],2),t._v(" "),i("div",{staticClass:"thumb_date thumb_ext"},[i("span",[i("i",{staticClass:"fa fa-clock-o"},[t._v(" "+t._s(t.videoParams.created))])]),t._v(" "),i("span",{staticStyle:{float:"right"}},[i("i",{staticClass:"fa fa-play-circle-o"},[t._v(" "+t._s(t.videoParams.clicks)+"次")])])]),t._v(" "),i("div",{staticClass:"thumb_live"},[i("x-button",{attrs:{type:"primary"},on:{click:t.onClickLive}},[t._v("点击切换到直播")])],1),t._v(" "),i("div",{staticClass:"thumb_split"}),t._v(" "),i("ListView",{ref:"listVod",attrs:{focusRecord:t.videoParams.record_id,list:t.arrGallery},on:{"on-click-list-item":t.onClickVod}}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isDispEnd,expression:"isDispEnd"}],ref:"endScroll",staticClass:"endScroll"},[t._v("没有更多内容了")])],1)])],1)},Re=[],je={render:Be,staticRenderFns:Re},He=je,Ne=i("/Xao"),Ie=f,Xe=Ne(Me,He,!1,Ie,null,null),Ve=Xe.exports;m.a.use(_.a);var ze=new _.a({routes:[{path:"/",name:"Index",component:P},{path:"/home",name:"Home",component:It},{path:"/vod",name:"Vod",component:fe},{path:"/live",name:"Live",component:Ve}]}),Fe=i("7kPf"),We=i.n(Fe),Ye=i("201h"),Ue=i.n(Ye),qe=i("2sCs"),Je=i.n(qe),Ke=i("MqOw"),Ze=i.n(Ke),Qe=i("4YfN"),ti=i.n(Qe),ei={components:{Loading:dt},computed:ti()({},Object(g.b)({direction:function(t){return t.vux.direction},isLoading:function(t){return t.vux.isLoading}})),mounted:function(){}},ii=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",[i("loading",{attrs:{show:t.isLoading,position:"absolute",text:"加载中"}})],1),t._v(" "),i("div",[i("transition",{attrs:{name:"vux-pop-"+("forward"===t.direction?"in":"out")}},[i("keep-alive",[i("router-view")],1)],1)],1)])},ai=[],si={render:ii,staticRenderFns:ai},ni=si,oi=i("/Xao"),ri=v,li=oi(ei,ni,!1,ri,null,null),ci=li.exports,ui=i("iDdd");i("sXeA"),i("s+GD"),i("MD8P"),i("3syo"),m.a.use(We.a),m.a.use(g.a);var di=new g.a.Store;di.registerModule("vux",{state:{isLoading:!1,direction:"forward",fastClick:ui},mutations:{updateLoadingStatus:function(t,e){t.isLoading=e.isLoading},updateDirection:function(t,e){t.direction=e.direction}}});var pi=window.sessionStorage;pi.clear();var hi=1*pi.getItem("count")||0;pi.setItem("/",0),ze.beforeEach(function(t,e,i){di.commit("updateLoadingStatus",{isLoading:!0});var a=pi.getItem(t.path),s=pi.getItem(e.path);a?!s||parseInt(a,10)>parseInt(s,10)||"0"===a&&"0"===s?di.commit("updateDirection",{direction:"forward"}):di.commit("updateDirection",{direction:"reverse"}):(++hi,pi.setItem("count",hi),"/"!==t.path&&pi.setItem(t.path,hi),di.commit("updateDirection",{direction:"forward"})),i()}),m.a.use(Ue.a,{error:"/wxapi/public/images/snap.png",throttleWait:300,observer:!1,attempt:1}),m.a.use(Ze.a,Je.a),m.a.config.productionTip=!1,m.a.config.devtools=!0,new m.a({store:di,router:ze,el:"#app",template:"<App/>",components:{App:ci}})},PWGy:function(t,e){},UmRk:function(t,e){},"W+SH":function(t,e){},ZVek:function(t,e,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=i("3cXf"),n=a(s),o=i("J97t"),r=a(o),l=i("Nz9O");e.default={mounted:function(){this.list&&0===this.list.length||this.render(),this.xheight=this.getHeight()},methods:{clickListItem:function(t){(0,l.go)(t.url,this.$router),this.$emit("on-click-list-item",JSON.parse((0,n.default)(t)))},buildBackgroundUrl:function(t){return"url("+t+")"},render:function(){var t=this;this.swiper&&this.swiper.destroy(),this.swiper=new r.default({container:this.$el,direction:this.direction,auto:this.auto,loop:this.loop,interval:this.interval,threshold:this.threshold,duration:this.duration,height:this.height||this._height,minMovingDistance:this.minMovingDistance,imgList:this.imgList}).on("swiped",function(e,i){t.current=i%t.length,t.props_index=i%t.length})},rerender:function(){var t=this;this.$el&&this.$nextTick(function(){t.props_index=0,t.current=0,t.length=t.list.length||t.$children.length,t.destroy(),t.render()})},destroy:function(){this.swiper&&this.swiper.destroy()},getHeight:function(){var t=parseInt(this.height,10);return t?this.height:t?void 0:this.aspectRatio?this.$el.offsetWidth*this.aspectRatio+"px":"180px"}},props:{list:{type:Array,default:function(){return[]}},direction:{type:String,default:"horizontal"},showDots:{type:Boolean,default:!0},showDescMask:{type:Boolean,default:!0},dotsPosition:{type:String,default:"right"},dotsClass:String,auto:{type:Boolean,default:!1},loop:Boolean,interval:{type:Number,default:3e3},threshold:{type:Number,default:50},duration:{type:Number,default:300},height:{type:String,default:"auto"},aspectRatio:Number,minMovingDistance:{type:Number,default:0},index:{type:Number,default:0},value:{type:Number,default:0}},data:function(){return{current:this.props_index,xheight:"auto",length:this.list.length,props_index:0}},watch:{list:function(t){this.rerender()},current:function(t){this.$emit("on-index-change",t)},props_index:function(t){var e=this;t!==this.current&&this.$nextTick(function(){e.swiper.go(t)}),this.$emit("input",t)},index:function(t,e){this.props_index=t},value:function(t){this.props_index=t}},beforeDestroy:function(){this.destroy()}}},hO0g:function(t,e){},"kZE+":function(t,e){},lEuh:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("aA9S"),s=i.n(a);window.videojs=i("KG7q"),videojs=videojs.default||videojs;var n={name:"video-player",props:{options:{type:Object,required:!0},start:{type:Number,default:function(){return 0}},playsinline:{type:Boolean,default:function(){return!1}},customEventName:{type:String,default:function(){return"statechanged"}}},mounted:function(){this.player||this.initialize()},beforeDestroy:function(){this.player&&this.dispose()},methods:{initialize:function(){var t=this;this.player=null;var e=s()({autoplay:!1,controls:!0,preload:"auto",fluid:!1,muted:!1,width:"100%",height:"360",language:"en",controlBar:{remainingTimeDisplay:!1,playToggle:{},progressControl:{},fullscreenToggle:{},volumeMenuButton:{inline:!1,vertical:!0}},techOrder:["html5"],plugins:{}},this.options),i=this.playsinline;i&&(this.$el.children[0].setAttribute("playsinline",i),this.$el.children[0].setAttribute("webkit-playsinline",i));var a=function(e,i){if(e&&t.$emit(e,t.player),i){var a={};a[e]=i,t.$emit(t.customEventName,a)}};e.plugins&&delete e.plugins.__ob__,this.player=videojs(this.$el.children[0],e,function(){var e=this;t.$emit("ready",t.player);for(var i=["loadeddata","canplay","canplaythrough","play","pause","waiting","playing","ended","error"],s=0;s<i.length;s++)!function(t){e.on(t,function(){a(t,!0)})}(i[s]);this.on("timeupdate",function(){a("timeupdate",this.currentTime())})})},dispose:function(){if(this.player&&videojs){if("Flash"!==this.player.techName_&&this.player.pause&&this.player.pause(),videojs(this.$el.children[0]).dispose(),!this.$el.children.length){var t=document.createElement("video");t.className="video-js",this.$el.appendChild(t)}this.player=null}}},watch:{options:{deep:!0,handler:function(t,e){this.dispose(),t&&t.sources&&t.sources.length&&this.initialize()}}}},o=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0,!1,!1)},r=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"video-player"},[i("video",{staticClass:"video-js"})])}],l={render:o,staticRenderFns:r},c=l,u=i("/Xao"),d=u(n,c,!1,null,null,null);e.default=d.exports},lfr8:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={mounted:function(){this.$parent.updateIndex(),this.props_selected=this.selected},props:{activeClass:String,disabled:Boolean,selected:{type:Boolean,default:!1}},computed:{style:function(){return{borderWidth:this.$parent.lineWidth+"px",borderColor:this.$parent.activeColor,color:this.props_selected?this.$parent.activeColor:this.disabled?this.$parent.disabledColor:this.$parent.defaultColor,border:this.$parent.animate?"none":"auto"}}},beforeDestroy:function(){var t=this.$parent;this.$nextTick(function(){t.updateIndex()})},methods:{onItemClick:function(){void 0!==this.disabled&&!1!==this.disabled||(this.props_selected=!0,this.$parent.$emit("onTabItemClick",this.index))}},watch:{props_selected:function(t){},selected:function(t){console.log("selected"),this.props_selected=t}},data:function(){return{index:-1,props_selected:!1}}}},nmDi:function(t,e){},pL7N:function(t,e,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=i("aA9S"),n=a(s),o=i("pGA8"),r=a(o),l=i("n7TE"),c=a(l),u=i("gTEw"),d=a(u),p=function(){return{content:"Pull Down To Refresh",height:60,autoRefresh:!1,downContent:"Pull Down To Refresh",upContent:"Release To Refresh",loadingContent:"Loading...",clsPrefix:"xs-plugin-pulldown-"}},h=function(){return{content:"Pull Up To Refresh",pullUpHeight:60,height:40,autoRefresh:!1,downContent:"Release To Refresh",upContent:"Pull Up To Refresh",loadingContent:"Loading...",clsPrefix:"xs-plugin-pullup-"}};e.default={props:{height:String,lockX:Boolean,lockY:Boolean,scrollbarX:Boolean,scrollbarY:Boolean,bounce:{type:Boolean,default:!0},useOriginScroll:{type:Boolean,default:!1},useTransition:{type:Boolean,default:!0},preventDefault:{type:Boolean,default:!0},stopPropagation:Boolean,boundryCheck:{type:Boolean,default:!0},gpuAcceleration:{type:Boolean,default:!0},usePulldown:{type:Boolean,default:!1},usePullup:{type:Boolean,default:!1},pulldownConfig:{type:Object,default:function(){return{}}},pullupConfig:{type:Object,default:function(){return{}}},pulldownStatus:{type:String,default:"default"},pullupStatus:{type:String,default:"default"},enableHorizontalSwiping:{type:Boolean,default:!1},pullStatus:{type:Object,default:function(){return{down:"default",up:"default"}}}},methods:{reset:function(t){var e=this;t&&(void 0!==t.left&&this._xscroll.scrollLeft(t.left),void 0!==t.top&&this._xscroll.scrollTop(t.top)),setTimeout(function(){e._xscroll&&e._xscroll.render()})}},compiled:function(){this.uuid=Math.random().toString(36).substring(3,8)},computed:{styles:function(){return!this.props_height&&""===this.elHeight&&this.lockX&&(this.props_height=document.documentElement.clientHeight+"px",this.reset()),this.props_height&&0===this.props_height.indexOf("-")&&(this.props_height=document.documentElement.clientHeight+parseInt(this.props_height)+"px"),{height:""+this.props_height}}},beforeMount:function(){this.uuid=Math.random().toString(36).substring(3,8),this.props_height=this.height,this.props_pulldownStatus=this.pulldownStatus,this.$on("pulldown:reset",function(t){var e=this;this.props_pulldownStatus="default",t===this.uuid&&this.pulldown.reset(function(){e.reset()})}),this.$on("pullup:reset",function(t){this.props_pullupStatus="default",t===this.uuid&&(this.pullup.complete(),this.reset())}),this.$on("pullup:done",function(t){t===this.uuid&&this._xscroll.unplug(this.pullup)}),this.$on("scroller:reset",function(t){t===this.uuid&&this.reset()}),this.$on("pullup:disable",function(t){t===this.uuid&&this.pullup.stop()}),this.$on("pullup:enable",function(t){t===this.uuid&&this.pullup.restart()})},mounted:function(){var t=this;this.elHeight=this.$el.style.height,this.$el.setAttribute("id","vux-scroller-"+this.uuid);for(var e=null,i=this.$el.querySelector(".xs-container").childNodes,a=0;a<i.length;a++)if(1===i[a].nodeType){e=i[a];break}if(!e)throw new Error("no content is found");if(this._xscroll=new r.default({renderTo:"#vux-scroller-"+this.uuid,lockX:this.lockX,lockY:this.lockY,scrollbarX:this.scrollbarX,scrollbarY:this.scrollbarY,content:e,bounce:this.bounce,useOriginScroll:this.useOriginScroll,useTransition:this.useTransition,preventDefault:this.preventDefault,boundryCheck:this.boundryCheck,gpuAcceleration:this.gpuAcceleration,stopPropagation:this.stopPropagation}),this.usePulldown){var s=!!this.$slots.pulldown&&this.$slots.pulldown[0].elm,o=(0,n.default)(p(),this.pulldownConfig);s&&(o.container=s),this.pulldown=new c.default(o),this._xscroll.plug(this.pulldown),this.pulldown.on("loading",function(e){t.$emit("pulldown:loading",t)}),this.pulldown.on("statuschange",function(e){t.props_pulldownStatus=e.newVal,t.pullStatus.down=e.newVal})}if(this.usePullup){var l=!!this.$slots.pullup&&this.$slots.pullup[0].elm,u=(0,n.default)(h(),this.pullupConfig);l&&(u.container=l),this.pullup=new d.default(u),this._xscroll.plug(this.pullup),this.pullup.on("loading",function(e){t.$emit("pullup:loading",t)}),this.pullup.on("statuschange",function(e){t.props_pullupStatus=e.newVal,t.pullStatus.up=e.newVal})}this.enableHorizontalSwiping&&(this._xscroll.on("panstart",function(e){2!==e.direction&&4!==e.direction||(e.preventDefault(),t.scrollbarY&&(t._xscroll.userConfig.scrollbarY=!1),t._xscroll.userConfig.lockY=!0)}),this._xscroll.on("panend",function(){t.scrollbarY&&(t._xscroll.userConfig.scrollbarY=!0),t._xscroll.userConfig.lockY=!1})),this._xscroll.render()},watch:{height:function(t,e){this.props_height=t},pulldownStatus:function(t,e){this.props_pulldownStatus=t},pullupStatus:function(t,e){this.props_pullupStatus=t}},beforeDestroy:function(){this.pullup&&(this._xscroll.unplug(this.pullup),this.pullup.pluginDestructor()),this.pulldown&&(this._xscroll.unplug(this.pulldown),this.pulldown.pluginDestructor()),this._xscroll.destroy(),this._xscroll=null},data:function(){return{elHeight:"",props_height:"",props_pulldownStatus:"default",props_pullupStatus:"default"}}}},r6aI:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{show:Boolean,text:{type:String,default:"Loading"},position:String}}},"s+GD":function(t,e){},wBjb:function(t,e){},xT42:function(t,e){},zPej:function(t,e){}},["NHnr"]);